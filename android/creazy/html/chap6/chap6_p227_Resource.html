<!doctype html>
<html><!-- InstanceBegin template="/Templates/zjdgx-notes.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="zjdgx" />
<!-- InstanceBeginEditable name="doctitle" -->
<meta name="description" content="第6章 Android应用的资源(P227)"/>
<meta name="date" content="20140507" />
<title>zjdgx notes</title>
<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="head" -->
<style type="text/css">
	html,body{
		background-color: #fff;
	}
	li{
		list-style: none;
	}
	.main{
		font: 12px/1.8 'microsoft yahei',courier new,times new roman;
	}
	.code {
		margin: 0;
		padding: 5px 10px;
		background-color:#e8e8e8;
		font-family: "Courier New", Courier, monospace;
	}
	p.code {
		margin-left: 2em;
	}
	pre.code {
		margin: 0.5em 0;
		line-height: 150%;
		padding: 0.4em 0.6em;
	}
	ol li {
		list-style: decimal;
	}
	.main h1{
		margin: 0;
		font-size: 14px;
	}
	.main h1 a {
		margin-left: 20px;
	}
	.main .point {
		padding-left: 5px;
		margin: 5px 0 5px 2em;
		background-color: #f8f8f8;
	}
	.main .point3 {
		padding-left: 5px;
		margin: 5px 0 5px 4em;
	}
	.main .em {
		text-decoration: underline;
	}
	.main h2 {
		margin: 0;
		margin-top: 10px;
		margin-left: 2em;
		font-size: 12px;
	}
	.main h3 {
		font-size: 12px;
		font-weight: normal;
		margin: 10px 0 0 3em;
	}
	.main ol {
		margin: 0;
		margin-left: 2em;
	}
	.main ol.h3 {
		margin: 0;
		font-size: 12px;
		margin-left: 4em;
	}
	h4 {
		margin: 0;
		text-indent: 5em;
		font-weight: normal;
	}
	table {
		border-collapse: collapse;
		margin-left: 5em;
	}
	table td,table th {
		padding: 2px 20px;
	}
	.table td,.table th {
		border: solid 1px #ccc;
	}
	.exampleCode {
		margin-left: 5em;
	}
	.example {
		width: 65px;
		color: #f00;
		display: block;
		cursor: pointer;
		padding: 2px 5px;
		font-weight: bold;
		text-align: center;
		background-color: #f8f8f8;
	}
	.example i {
		width: 0;
		margin-left: 5px;
		display: inline-block;
		vertical-align: middle;
		border: 5px solid #f86;
		border-width: 5px 5px 0 5px;
		border-color: #f86 transparent transparent transparent;
	}
	.hidden {
		display: none;
	}
	
</style>
<!-- InstanceEndEditable -->
</head>
<body>
	<div class="main">
		<!-- InstanceBeginEditable name="content" -->
		<h1>第6章 Android应用的资源(P227)</h1>
		<h2>本章要点</h2>
		<table cellpadding="0" cellspacing="0">
			<tr>
				<td>Android应用的资源和作用</td>
				<td>Android应用的资源的存储方式</td>
				<td>在XML布局文件中使用资源</td>
			</tr>
			<tr>
				<td>在Java程序中使用资源</td>
				<td>使用字符串资源</td>
				<td>使用颜色资源</td>
			</tr>
			<tr>
				<td>使用尺寸资源</td>
				<td>使用数组资源</td>
				<td>使用图片资源</td>
			</tr>
			<tr>
				<td>使用各种Drawable资源</td>
				<td>使用原始XML资源</td>
				<td>使用布局资源</td>
			</tr>
			<tr>
				<td>使用菜单资源</td>
				<td>使用样式和主题资源</td>
				<td>使用属性资源</td>
			</tr>
			<tr>
				<td>使用原始资源</td>
				<td>使用资源进行程序国际化</td>
			</tr>			
		</table>
		<h2>6.1 资源的类型及存储方式(P228)</h2>
		<h3>6.1.1 资源的类型及存储方式(P228)</h3>
		<h3>6.1.2 使用资源(P230)</h3>
		<h2>6.2 使用字符串、颜色和尺寸资源(P231)</h2>
		<h3>6.2.1 颜色值的定义(P231)</h3>
		<h3>6.2.2 定义字符串、颜色、尺寸文件(P232)</h3>
		<h3>6.2.3 使用字符串、颜色、尺寸资源(P233)</h3>
		<h2>6.3 数组(Array)资源(P236)</h2>
		<h4>Array资源包含的子元素:</h4>
		<ol class="h3">
			<li>&lt;array../>: 定义普通的数组;</li>
			<li>&lt;string-array../>: 定义字符串数组;</li>
			<li>&lt;integer-array../>: 定义整数数组.</li>
		</ol>
		<h2>6.4 使用Drawable资源(P239)</h2>
		<h3>6.4.1 图片资源(P239)</h3>
		<h3>6.4.2 StateListDrawable资源(P239)</h3>
		<p class="point3">
			1). StateListDrawable用于组织多个Drawable对象, StateListDrawable对象所显示的Drawable对象会随目标状态的改变而自动切换;<br>
			2). 定义StateListDrawable对象的XML文件的根元素为&lt;selector.../>, 该元素可以包含多个&lt;item.../>对象.
		</p>
		<h4>selector item对象属性)modifieddfsafds a on 20140512:</h4>
		<ol class="h3">
			<li>android:color或android:drawable: 指定颜色或Drawable对象;</li>
			<li>android:state_xxx: 指定一个特定状态.</li>
		</ol>
		<table class="table" cellpadding="0" cellspacing="0">
			<caption>StateListDrawable支持的状态</caption>
			<tr>
				<td>android:state_achieve</td>
				<td>代表是否处于激活状态</td>
				<td>android:state_checkable</td>
				<td>代表是否处于可勾选状态</td>
			</tr>
			<tr>
				<td>android:state_checked</td>
				<td>代表是否处于已勾选状态</td>
				<td>android:state_enabled</td>
				<td>代表是否处于可用状态</td>
			</tr>
			<tr>
				<td>android:state_first</td>
				<td>代表是否处于开始状态</td>
				<td>android:state_focused</td>
				<td>代表是否处于已得到焦点状态</td>
			</tr>
			<tr>
				<td>android:state_last</td>
				<td>代表是否处于结束状态</td>
				<td>android:state_middle</td>
				<td>代表是否处于中间状态</td>
			</tr>
			<tr>
				<td>android:state_pressed</td>
				<td>代表是否处于已被按下状态</td>
				<td>android:state_selected</td>
				<td>代表是否处于已被选中状态</td>
			</tr>
			<tr>
				<td>android:state_window_focused</td>
				<td>代表是否窗口已得到焦点状态</td>
				<td></td>
				<td></td>
			</tr>
		</table>
		<pre class="code">
	&lt;EditText 
		android:id="@+id/p240_highlight_first"
		android:layout_width="fill_parent"
		android:layout_height="wrap_content"
		android:inputType="text"
		android:textColor="@drawable/p240_highlight_input"/>
		</pre>
		<h3>6.4.3 LayerDrawable资源(P241)<a class="code" href="../../code/chap6/6.4/P242_LayerDrawableActivity.java">代码</a></h3>
		<h4>LayerDrawable对象的根元素&lt;layer-list.../>可以包含多个&lt;item../>元素, 属性有:</h4>
		<ol class="h3">
			<li>android:drawable: 指定作为LayerDrawable元素之一的Drawable对象;</li>
			<li>android:id: 为该Drawable对象指定一个标识;</li>
			<li>android:bottom|left|top|right: 指定一个长度值, 用于指定将该Drawable对象绘制到目标组件的指定位置.</li>
		</ol>
		<pre class="code">
	&lt;?xml version="1.0" encoding="utf-8"?>
	&lt;layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
		&lt;!-- 指定一个Drawable元素 -->
		&lt;item android:id="@android:id/background"
	             android:drawable="@drawable/grow" />
	&lt;/layer-list>
		</pre>
		<h3>6.4.4 ShapeDrawable资源(P243)<a class="code" href="../../code/chap6/6.4/P243_ShapeDrawableActivity.java">代码</a></h3>
		<p class="point3">
			android:shape=["rectangle" | "oval" | "line" | "ring"]
		</p>
		<h3>6.4.5 ClipDrawable资源(P245)<a class="code" href="../../code/chap6/6.4/P246_ClipDrawableActivity.java">代码</a></h3>
		<p class="point3">
			ClipDrawable使用&lt;clip.../>元素, 语法为:
		</p>
		<pre class="code">
	&lt;?xml version="1.0" encoding="utf-8"?>
	&lt;clip xmlns:android="http://schemas.android.com/apk/res/android"
	  android:drawable="@drawable/drawable_resource"
	  android:clipOrientation=["horizontal" | "vertical"]
	  android:gravity=["top"|"bottom"|"left"|"right"|"center_horizontal"|"center_vertical"|
	      "fill_vertical"|"fill_horizental"|"center"|"fill"|"clip_vertical"|"clip_horizental"] />
		</pre>
		<h3>6.4.6 AnimationDrawable资源(P247)<a class="code" href="../../code/chap6/6.4/P246_ClipDrawableActivity.java">代码</a></h3>
		<p class="point3">
			定义补间动画XML资源文件(&lt;set.../>)的根元素可以包含的元素:
		</p>
		<ol class="h3">
			<li>alpha: 设置透明度的改变;</li>
			<li>scale: 设置图片进行缩放改变;</li>
			<li>translate: 设置图片进行位移变换;</li>
			<li>rotate: 设置图片进行旋转.</li>
		</ol>
		<div class="exampleCode">
			<span class="example">示例代码<i></i></span>
			<pre class="code hidden">
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator" >

    &lt;!-- 定义缩放效果 -->
    &lt;scale
        android:duration="2000"
        android:fillAfter="true"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="1.4"
        android:toYScale="0.6" />

    &lt;!-- 定义位移变换 -->
    &lt;translate
        android:duration="2000"
        android:fromXDelta="10"
        android:fromYDelta="30"
        android:toXDelta="130"
        android:toYDelta="-80" />

&lt;/set>
			</pre>
		</div>
		<h2>6.5 使用原始XML资源(P250)</h2>
		<h3>6.5.1 定义原始XML资源(P250)</h3>
		<h3>6.5.2 使用原始XML文件(P251)</h3>
		<div class="exampleCode">
			<span class="example">示例代码<i></i></span>
			<pre class="code hidden">
XmlResourceParser xrp = getResources().getXml(R.xml.p251_xml_res_books);
try {
	while (xrp.getEventType() != XmlResourceParser.END_DOCUMENT) {
		StringBuffer sb = new StringBuffer("");
		if (xrp.getEventType() == XmlResourceParser.START_TAG) {
			// 获取该标签的标签名
			String tagName = xrp.getName();
			if (tagName.equals("zjdgx")) {
				String bookName = xrp.getAttributeValue(null,
						"price");
				sb.append("价格: " + bookName);
				String bookDate = xrp.getAttributeValue(1);
				sb.append("  出版日期: " + bookDate);
				sb.append("  书名: " + xrp.nextText());
			}
			TextView tv = new TextView(P251_XmlResActivity.this);
			tv.setText(sb.toString());
			layout.addView(tv);
		}
		xrp.next();
	}
} catch (XmlPullParserException e) {
	e.printStackTrace();
} catch (IOException e) {
	e.printStackTrace();
}
			</pre>
		</div>
		<h2>6.6 使用布局(Layout)资源(P253)</h2>
		<h2>6.7 使用菜单(Menu)资源(P253)</h2>
		<h3>6.7.1 定义菜单资源(P253)</h3>
		<p class="point3">菜单资源文件放在/res/menu目录下, 根元素&lt;menu.../>包含如下子元素:</p>
		<ol class="h3">
			<li>&lt;item.../>元素: 定义菜单项;</li>
			<li>&lt;group.../>元素: 将多个&lt;item.../>元素包装成一个菜单组.</li>
		</ol>
		<p class="point3">&lt;group.../>元素属性:</p>
		<ol class="h3">
			<li>checkableBehavior: 定义该组菜单的选择行为(none,all,single);</li>
			<li>menuCategory: 对菜单进行分类, 指定菜单的优先级, 有效值container、system、secondary和alternative;</li>
			<li>visible: 指定该组菜单是否可见;</li>
			<li>enable: 指定该组菜单是否可用.</li>
		</ol>
		<h3>6.7.2 使用菜单资源(P254)</h3>
		<div class="exampleCode">
			<span class="example">示例代码<i></i></span>
			<pre class="code hidden">
&lt;menu xmlns:android="http://schemas.android.com/apk/res/android" >
    &lt;item
        android:icon="@drawable/p254_menu_res_font"
        android:title="@string/p254_menu_res_choose_font_size">
        &lt;menu>
            &lt;group android:checkableBehavior="single" >
                &lt;!-- 定义多个菜单项 -->
                &lt;item
                    android:id="@+id/p254_menu_font_10"
                    android:title="@string/p254_menu_font_10_text"/>
                &lt;item
                    android:id="@+id/p254_menu_font_12"
                    android:title="@string/p254_menu_font_12_text"/>
                &lt;item
                    android:id="@+id/p254_menu_font_14"
                    android:title="@string/p254_menu_font_14_text"/>
                &lt;item
                    android:id="@+id/p254_menu_font_16"
                    android:title="@string/p254_menu_font_16_text"/>
                &lt;item
                    android:id="@+id/p254_menu_font_18"
                    android:title="@string/p254_menu_font_18_text"/>
            &lt;/group>
        &lt;/menu>
    &lt;/item>
    &lt;!-- 定义一个普通菜单项 -->
    &lt;item
        android:id="@+id/p254_menu_plain_item"
        android:title="@string/p254_menu_plain_item_text"/>
    &lt;item
        android:icon="@drawable/p254_menu_res_font_color"
        android:title="@string/p254_menu_res_choose_font_color">
        &lt;menu>
            &lt;group>
                &lt;!-- 定义一组允许复选的菜单项 -->
                &lt;item
                    android:id="@+id/p254_menu_red_font"
                    android:title="@string/p254_menu_red_font_text"/>
                &lt;item
                    android:id="@+id/p254_menu_green_font"
                    android:title="@string/p254_menu_green_font_text"/>
                &lt;item
                    android:id="@+id/p254_menu_blue_font"
                    android:title="@string/p254_menu_blue_font_text"/>
            &lt;/group>
        &lt;/menu>
    &lt;/item>
&lt;/menu>
			</pre>
		</div>
		<h2>6.8 样式(Style)和主题(Theme)资源(P257)</h2>
		<h3>6.8.1 样式资源(P257)</h3>
		<p class="point3">
			样式资源(&lt;resources.../>)元素可以包含多个&lt;style.../>子元素, 每个&lt;style.../>元素指定如下两个属性:
		</p>
		<ol class="h3">
			<li>name: 指定样式的名称;</li>
			<li>parent: 指定该样式继承的父样式;</li>
			<li>translate: 设置图片进行位移变换;</li>
			<li>rotate: 设置图片进行旋转.</li>
		</ol>
		<p class="point3">
			&lt;style.../>元素可以包含多个&lt;item.../>子元素.
		</p>
		<h3>6.8.2 主题资源(P259)</h3>
		<p class="point3">
			主题资源(&lt;resources.../>)与样式资源类似, 主要区别:
		</p>
		<ol class="h3">
			<li>主题不能作用于单个的View组件, 主题应该对整个应用中的所有Activity起作用, 或对指定的Activity起作用;</li>
			<li>主题定义的格式应该是改变窗口外观的格式, 如窗口标题、窗口边框等.</li>
		</ol>
		<h2>6.9 属性(Attribute)资源(P261)</h2>
		<p class="point3">
			属性资源(&lt;resources.../>)放在/res/values目录下, 根元素包含两个子元素:
		</p>
		<ol class="h3">
			<li>attr子元素: 定义一个属性;</li>
			<li>declare-styleable子元素: 定义一个styleable对象, 每个styleable对象就是一组attr属性集合.</li>
		</ol>
		<h2>6.10 使用原始资源(P264)</h2>
		<p class="point3">
			原始资源存放位置:<br>
			&nbsp;&nbsp;&nbsp;&nbsp;1. /res/raw/目录下, Android SDK会处理该目录下的资源;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;2. /assets/目录下, 需要通过AssetManager来管理资源.
		</p>
		<div class="exampleCode">
			<span class="example">示例代码<i></i></span>
			<pre class="code hidden">
AssetManager am = getAssets();
try {
	AssetFileDescriptor afd = am.openFd("my_heart_will_go_on.mp3");
	mpAssets = new MediaPlayer();
	mpAssets.setDataSource(afd.getFileDescriptor());
	mpAssets.prepare();
} catch (IOException e) {
	e.printStackTrace();
}
			</pre>
		</div>
		<h2>6.11 国际化和资源自适应(P266)</h2>
		<h3>6.11.1 Java国际化的思路(P266)</h3>
		<p class="point3">
			Java程序国际化主要通过三个类完成:<br>
			&nbsp;&nbsp;&nbsp;&nbsp;1. java.util.ResourceBundle: 用于加载一个国家、语言资源包;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;2. java.util.Locale: 用于封装一个特定的国家/区域、语言环境;<br>
			&nbsp;&nbsp;&nbsp;&nbsp;3. java.text.MessageFormat: 用于格式化带占位符的字符串.
		</p>
		<h3>6.11.2 Java支持的语言和国家(P266)</h3>
		<h3>6.11.3 完成程序国际化(P268)</h3>
		<p class="point3">
			对于非UNICODE资源文件, Java提供了native2ascii(%JAVA_HOME%/bin目录)来处理该文件, 语法格式为:<br>
			&nbsp;&nbsp;&nbsp;&nbsp;native2ascii 原资源文件 目的资源文件.
		</p>
		<div class="exampleCode">
			<span class="example">示例代码<i></i></span>
			<pre class="code hidden">
public class RawHello {
	public static void main(String[] args) {
		Locale locale = Locale.getDefault();
		ResourceBundle bundle = ResourceBundle.getBundle("mess", locale);
		System.out.println(bundle.getString("hello"));
	}
}
			</pre>
		</div>
		<h3>6.11.4 为Android应用提供国际化资源(P269)</h3>
		<p class="point3">
			value目录国际化格式:<br>
			&nbsp;&nbsp;&nbsp;&nbsp;values-语言代码-r国家代码
		</p>
		<h3>6.11.5 国际化Android应用(P270)</h3>
		<h2>6.12 本章小结(P272)</h2>
		<!-- InstanceEndEditable -->
	</div>
	<script type="text/javascript">
		window.onload = function() {
			var examples = document.getElementsByClassName("exampleCode"),
				len = examples.length;
			for(var i=0; i<len; i++) {
				examples[i].onclick = function() {
					showCode(this);
				}
			}
		};
		function showCode( element ) {
			console.log("click");
			var childNodes = element.childNodes,
				len = childNodes.length,
				codeNode, cls = "";
			for(var i=0; i<len; i++) {
				if(childNodes[i].getAttribute != undefined) {
					cls = childNodes[i].getAttribute("class");
				}
				if(cls != null && cls.length > 0 && cls.indexOf("hidden") > -1) {
					codeNode = childNodes[i];
					break;
				}
			}
			if( codeNode.style.display == "" || codeNode.style.display == "none") {
				codeNode.style.display = "block";
			} else {
				codeNode.style.display = "none";
			}
		}
	</script>
</body>
<!-- InstanceEnd -->
</html>