<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="Date" content="2015-09-07">
    <title>Dynamic Children Demo</title>
    <link rel="stylesheet" href="../common/style/prettify.css" />
</head>
<body>
    <div class="description">
        When React reconciles the keyed children, it will ensure that any child with <code class="prettyprint">key</code> will be reordered (instead of clobbered) or destroyed (instead of reused).<br><br>

        The <code class="prettyprint">key</code> should always be supplied directly to the components in the array, not to the container HTML child of each component in the array:
    </div>
    <div id="wrongDemo"></div>
    <div id="rightDemo"></div>
    <pre class="prettyprint">
var results = [
    {id: 4, text: 'Demo data 4'},
    {id: 1, text: 'Demo data 1'},
    {id: 3, text: 'Demo data 3'},
    {id: 2, text: 'Demo data 2'},
    {id: 5, text: 'Demo data 5'}
];

var TitleComponent = React.createClass({
    render: function () {
        return &lt;h3&gt;{this.props.name}&lt;/h3&gt;;
    }
});
var WrongListItemWrapper = React.createClass({
    render: function () {
        return &lt;li key={this.props.data.id}&gt;{this.props.data.text}&lt;/li&gt;
    }
});
var WrongListComponents = React.createClass({
    render: function () {
        return (&lt;div className="wrongDemo"&gt;
            &lt;TitleComponent name={this.props.name}/&gt;
            &lt;ul&gt;
            {this.props.results.map(function (result) {
                return &lt;WrongListItemWrapper data={result} /&gt;;
            })}
            &lt;/ul&gt;
            &lt;/div&gt;);
    }
});
React.render(
    &lt;WrongListComponents name="Wrong Dynamic Children Demo" results={results} /&gt;,
    document.getElementById('wrongDemo')
);

var RightListItemWrapper = React.createClass({
    render: function () {
        return &lt;li&gt;{this.props.data.text}&lt;/li&gt;
    }
});
var RightListComponents = React.createClass({
    render: function () {
        return (&lt;div className="rightDemo"&gt;
            &lt;TitleComponent name={this.props.name}/&gt;
            &lt;ul&gt;
            {this.props.results.map(function (result) {
                return &lt;RightListItemWrapper key={result.id} data={result} /&gt;;
            })}
            &lt;/ul&gt;
            &lt;/div&gt;);
    }
});
React.render(
    &lt;RightListComponents name="Right Dynamic Children Demo" results={results} /&gt;,
    document.getElementById('rightDemo')
);</pre>
    <script type="text/javascript" src="js/react.js"></script>
    <script type="text/javascript" src="js/JSXTransformer.js"></script>
    <script type="text/javascript" src="js/react-with-addons.min.js"></script>
    <script type="text/javascript" src="js/marked.min.js"></script>
    <script type="text/jsx">
        var results = [
            {id: 4, text: 'Demo data 4'},
            {id: 1, text: 'Demo data 1'},
            {id: 3, text: 'Demo data 3'},
            {id: 2, text: 'Demo data 2'},
            {id: 5, text: 'Demo data 5'}
        ];

        var TitleComponent = React.createClass({
            render: function () {
                return <h3>{this.props.name}</h3>;
            }
        });
        var WrongListItemWrapper = React.createClass({
           render: function () {
                return <li key={this.props.data.id}>{this.props.data.text}</li>
           }
        });
        var WrongListComponents = React.createClass({
            render: function () {
                return (<div className="wrongDemo">
                    <TitleComponent name={this.props.name}/>
                    <ul>
                    {this.props.results.map(function (result) {
                        return <WrongListItemWrapper data={result} />;
                    })}
                    </ul>
                    </div>);
            }
        });

        React.render(
            <WrongListComponents name="Wrong Dynamic Children Demo" results={results} />,
            document.getElementById('wrongDemo')
        );

        var RightListItemWrapper = React.createClass({
            render: function () {
                return <li>{this.props.data.text}</li>
            }
        });
        var RightListComponents = React.createClass({
            render: function () {
                return (<div className="rightDemo">
                    <TitleComponent name={this.props.name}/>
                    <ul>
                        {this.props.results.map(function (result) {
                            return <RightListItemWrapper key={result.id} data={result} />;
                        })}
                    </ul>
                </div>);
            }
        });

        React.render(
            <RightListComponents name="Right Dynamic Children Demo" results={results} />,
            document.getElementById('rightDemo')
        );
    </script>
    <!-- 百度统计代码 -->
    <script date="2015-04-07">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?cbffbdfe4272cee27c414968a3ebb186";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <!-- google 统计代码 -->
    <script date="2015-04-07">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-43440970-3', 'auto');
        ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="../common/script/run_prettify.js"></script>
</body>
</html>